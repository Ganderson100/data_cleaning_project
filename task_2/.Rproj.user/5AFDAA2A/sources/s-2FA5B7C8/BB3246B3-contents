---
title: "R Notebook"
output: html_notebook
---

```{r}
library(readr)
library(tidyverse)
```

```{r}
library(here)

#test where the top level of the project directory is 
here::here()

#use this to set the path to the data files
cake_ingredients <- read_csv(here("raw_data/cake-ingredients-1961.csv"))

cake_ingredients_code <- read_csv(here("raw_data/cake_ingredient_code.csv"))
```

```{r}
dim(cake_ingredients)
head(cake_ingredients, 10)
tail(cake_ingredients, 10)
names(cake_ingredients)
view(cake_ingredients)
```

```{r}
# remove "BM" column as it contains no data
cake_ingredients2 <- cake_ingredients %>% 
  select(-BM)
head(cake_ingredients2)
```

```{r}
# change from wide to long

cake_ingredients3 <- cake_ingredients2 %>%
  pivot_longer(-Cake, 
               names_to = "code", 
               values_to = "value")
  
cake_ingredients3
```

```{r}
# remove NA's
cake_ingredients4 <- cake_ingredients3 %>% 
  drop_na()

cake_ingredients4
```


```{r}
dim(cake_ingredients_code)
head(cake_ingredients_code, 10)
tail(cake_ingredients_code, 10)
names(cake_ingredients_code)
view(cake_ingredients_code)
```

```{r}
# The ingredient "Sour cream cup" needs separated into "Sour cream" as an ingredient and "cup" as a measure

# Think we use the separate() function.  Don't know how to do this for one value in a column.

# Doesn't affect the analysis because the only question relating to cups is for Sponge cake and "Sour cream" is not a listed ingredient in that type of cake.

```

```{r}
# Join the two tables using a left join on the "code" variable

clean_cake <- left_join(cake_ingredients4, cake_ingredients_code, "code")

clean_cake
```


```{r}
here::here()
write_csv(clean_cake, here("clean_data/clean_cake.csv"))
```



